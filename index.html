<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ† ØªØ¹Ø§Ù…Ù„ÛŒ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-form">
                <h2>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ†</h2>
                
                <div class="form-group">
                    <label for="className">Ù†Ø§Ù… Ú©Ù„Ø§Ø³:</label>
                    <select id="className">
                        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                        <option value="math7">Ø±ÛŒØ§Ø¶ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ… - Ø§Ø³ØªØ§Ø¯ Ø§Ø­Ù…Ø¯ÛŒ</option>
                        <option value="science7">Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ… - Ø§Ø³ØªØ§Ø¯ Ù…Ø­Ù…Ø¯ÛŒ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="userName">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</label>
                    <input type="text" id="userName" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                </div>
                
                <div class="form-group">
                    <label for="userRole">Ù†Ù‚Ø´:</label>
                    <select id="userRole">
                        <option value="student">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option>
                        <option value="teacher">Ø§Ø³ØªØ§Ø¯</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" onclick="joinClass()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³</button>
                
                <div class="class-link">
                    <h4>Ù„ÛŒÙ†Ú© Ø¯Ø¹ÙˆØª Ø¨Ù‡ Ú©Ù„Ø§Ø³:</h4>
                    <div class="link-box">
                        <span id="inviteLink">https://myclass.com/join/class123</span>
                        <button class="btn btn-copy" onclick="copyLink()">Ú©Ù¾ÛŒ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ú©Ù„Ø§Ø³ -->
    <div id="classPage" class="page">
        <div class="container">
            <header class="header">
                <div class="class-info">
                    <h1 id="classTitle">Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ†</h1>
                    <div class="class-details">
                        <span id="teacherName">Ø§Ø³ØªØ§Ø¯: </span>
                        <span id="classTime">Ø²Ù…Ø§Ù†: </span>
                        <span id="studentCount">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†: 0</span>
                    </div>
                </div>
                <div class="header-controls">
                    <button class="btn btn-secondary" onclick="generateInviteLink()">Ø§ÛŒØ¬Ø§Ø¯ Ù„ÛŒÙ†Ú© Ø¯Ø¹ÙˆØª</button>
                    <button class="btn btn-secondary" onclick="leaveClass()">Ø®Ø±ÙˆØ¬ Ø§Ø² Ú©Ù„Ø§Ø³</button>
                </div>
            </header>

            <div class="main-content">
                <div class="video-section">
                    <div class="video-grid" id="videoGrid">
                        <!-- ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                    </div>
                </div>

                <div class="sidebar">
                    <div class="chat-container">
                        <div class="chat-header">
                            <h3>Ú†Øª Ú©Ù„Ø§Ø³</h3>
                            <button class="btn btn-sm" onclick="clearChat()">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                        </div>
                        <div class="chat-messages" id="chatMessages">
                            <div class="message system">
                                <span>Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</span>
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="messageInput" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...">
                            <button class="btn btn-primary" onclick="sendMessage()">Ø§Ø±Ø³Ø§Ù„</button>
                        </div>
                    </div>

                    <div class="participants-container">
                        <h3>Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ú¯Ø§Ù† (<span id="participantsCount">0</span>)</h3>
                        <div class="participants-list" id="participantsList">
                            <!-- Ù„ÛŒØ³Øª Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ú¯Ø§Ù† -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button id="micBtn" class="btn btn-control" onclick="toggleMicrophone()">
                    ğŸ¤ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†
                </button>
                <button id="cameraBtn" class="btn btn-control" onclick="toggleCamera()">
                    ğŸ“¹ Ø¯ÙˆØ±Ø¨ÛŒÙ†
                </button>
                <button class="btn btn-control" onclick="raiseHand()">
                    âœ‹ Ø¯Ø³Øª Ø¨Ù„Ù†Ø¯ Ú©Ù†
                </button>
                <button class="btn btn-control" onclick="shareScreen()">
                    ğŸ“º Ø§Ø´ØªØ±Ø§Ú© ØµÙØ­Ù‡
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #333;
    direction: rtl;
}

.page {
    width: 100%;
    height: 100vh;
    display: none;
}

.page.active {
    display: block;
}

/* ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ */
.login-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
}

.login-form {
    background: white;
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    width: 100%;
    max-width: 400px;
}

.login-form h2 {
    text-align: center;
    margin-bottom: 1.5rem;
    color: #2c3e50;
}

.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: #2c3e50;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    font-family: inherit;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: #3498db;
}

.btn {
    border: none;
    cursor: pointer;
    font-family: inherit;
    transition: all 0.3s ease;
}

.btn-primary {
    background: #3498db;
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 1rem;
    width: 100%;
    margin-top: 1rem;
}

.btn-primary:hover {
    background: #2980b9;
    transform: translateY(-2px);
}

.class-link {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid #eee;
}

.class-link h4 {
    margin-bottom: 0.5rem;
    color: #2c3e50;
}

.link-box {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.link-box span {
    flex: 1;
    background: #f8f9fa;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.9rem;
    border: 1px solid #ddd;
    direction: ltr;
    text-align: left;
}

.btn-copy {
    background: #27ae60;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.9rem;
}

.btn-copy:hover {
    background: #219a52;
}

/* ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ú©Ù„Ø§Ø³ */
.container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    background: white;
}

.header {
    background: #2c3e50;
    color: white;
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

.class-info h1 {
    margin-bottom: 0.5rem;
    font-size: 1.5rem;
}

.class-details {
    display: flex;
    gap: 1rem;
    font-size: 0.9rem;
    opacity: 0.9;
    flex-wrap: wrap;
}

.btn-secondary {
    background: #34495e;
    color: white;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 0.9rem;
}

.btn-secondary:hover {
    background: #2c3e50;
}

.main-content {
    flex: 1;
    display: flex;
    padding: 1rem;
    gap: 1rem;
    overflow: hidden;
}

.video-section {
    flex: 3;
    background: #000;
    border-radius: 10px;
    overflow: hidden;
    min-height: 400px;
}

.video-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
    padding: 1rem;
    height: 100%;
}

.video-item {
    background: #1a1a1a;
    border-radius: 10px;
    position: relative;
    aspect-ratio: 16/9;
}

.video-item video {
    width: 100%;
    height: 100%;
    border-radius: 10px;
    object-fit: cover;
}

.user-name {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 0.9rem;
}

.sidebar {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    min-width: 300px;
    max-width: 400px;
}

.chat-container {
    background: white;
    border: 1px solid #ddd;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    height: 400px;
}

.chat-header {
    padding: 1rem;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f8f9fa;
    border-radius: 10px 10px 0 0;
}

.chat-header h3 {
    margin: 0;
    color: #2c3e50;
}

.btn-sm {
    padding: 6px 12px;
    font-size: 0.8rem;
    background: #e74c3c;
    color: white;
    border-radius: 4px;
}

.chat-messages {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.message {
    padding: 0.5rem 1rem;
    border-radius: 15px;
    max-width: 80%;
    word-wrap: break-word;
}

.message.system {
    background: #e3f2fd;
    margin: 0 auto;
    text-align: center;
    font-size: 0.9rem;
    color: #1976d2;
}

.message.own {
    background: #dcf8c6;
    margin-right: auto;
    margin-left: 0;
}

.message.other {
    background: #f1f1f1;
    margin-left: auto;
    margin-right: 0;
}

.chat-input {
    display: flex;
    padding: 1rem;
    gap: 0.5rem;
    border-top: 1px solid #eee;
    background: #f8f9fa;
    border-radius: 0 0 10px 10px;
}

.chat-input input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 20px;
    outline: none;
    font-family: inherit;
}

.chat-input input:focus {
    border-color: #3498db;
}

.participants-container {
    background: white;
    border: 1px solid #ddd;
    border-radius: 10px;
    padding: 1rem;
}

.participants-container h3 {
    margin-bottom: 1rem;
    color: #2c3e50;
}

.participants-list {
    max-height: 200px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.participant-item {
    padding: 0.5rem;
    border-bottom: 1px solid #eee;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.participant-item.teacher {
    background: #e8f5e8;
    border-radius: 6px;
}

.controls {
    display: flex;
    justify-content: center;
    gap: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border-top: 1px solid #ddd;
    flex-wrap: wrap;
}

.btn-control {
    background: #3498db;
    color: white;
    padding: 12px 20px;
    border-radius: 25px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.btn-control:hover {
    background: #2980b9;
    transform: translateY(-2px);
}

.btn-control.active {
    background: #e74c3c;
}

/* Ø±Ø³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
@media (max-width: 768px) {
    .main-content {
        flex-direction: column;
    }
    
    .sidebar {
        max-width: 100%;
    }
    
    .video-grid {
        grid-template-columns: 1fr;
    }
    
    .header {
        flex-direction: column;
        text-align: center;
    }
    
    .class-details {
        justify-content: center;
    }
    
    .controls {
        gap: 0.5rem;
    }
    
    .btn-control {
        padding: 10px 15px;
        font-size: 0.8rem;
    }
}
// Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ¶Ø¹ÛŒØª Ú©Ù„Ø§Ø³
const classManager = {
    currentClass: null,
    currentUser: null,
    participants: [],
    isMicOn: true,
    isCameraOn: true,
    
    classes: {
        'math7': {
            title: 'Ø±ÛŒØ§Ø¶ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…',
            teacher: 'Ø§Ø³ØªØ§Ø¯ Ø§Ø­Ù…Ø¯ÛŒ',
            time: 'Û±Û°:Û°Û° - Û±Û±:Û³Û°',
            inviteLink: 'https://myclass.com/join/math7'
        },
        'science7': {
            title: 'Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…',
            teacher: 'Ø§Ø³ØªØ§Ø¯ Ù…Ø­Ù…Ø¯ÛŒ',
            time: 'Û±Û³:Û°Û° - Û±Û´:Û³Û°',
            inviteLink: 'https://myclass.com/join/science7'
        }
    },
    
    joinClass(className, userName, userRole) {
        this.currentClass = this.classes[className];
        this.currentUser = {
            name: userName,
            role: userRole,
            id: this.generateId()
        };
        
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ UI
        this.updateClassInfo();
        this.addParticipant(this.currentUser);
        
        // ØªØºÛŒÛŒØ± ØµÙØ­Ù‡
        document.getElementById('loginPage').classList.remove('active');
        document.getElementById('classPage').classList.add('active');
        
        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯
        this.addMessage('Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!', 'system');
        this.addMessage(`${userName} Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ù¾ÛŒÙˆØ³Øª`, 'system');
        
        // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÙˆÛŒØ¯ÛŒÙˆ
        this.simulateVideo();
    },
    
    updateClassInfo() {
        document.getElementById('classTitle').textContent = this.currentClass.title;
        document.getElementById('teacherName').textContent = `Ø§Ø³ØªØ§Ø¯: ${this.currentClass.teacher}`;
        document.getElementById('classTime').textContent = `Ø²Ù…Ø§Ù†: ${this.currentClass.time}`;
        document.getElementById('inviteLink').textContent = this.currentClass.inviteLink;
    },
    
    addParticipant(user) {
        this.participants.push(user);
        this.updateParticipantsList();
    },
    
    updateParticipantsList() {
        const list = document.getElementById('participantsList');
        const count = document.getElementById('participantsCount');
        const studentCount = document.getElementById('studentCount');
        
        list.innerHTML = '';
        
        this.participants.forEach(participant => {
            const item = document.createElement('div');
            item.className = `participant-item ${participant.role === 'teacher' ? 'teacher' : ''}`;
            item.innerHTML = `
                <span>${participant.role === 'teacher' ? 'ğŸ‘¨â€ğŸ«' : 'ğŸ‘¦'}</span>
                <span>${participant.name}</span>
                ${participant.role === 'teacher' ? '<small>(Ø§Ø³ØªØ§Ø¯)</small>' : ''}
            `;
            list.appendChild(item);
        });
        
        const students = this.participants.filter(p => p.role === 'student').length;
        count.textContent = this.participants.length;
        studentCount.textContent = `ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†: ${students}`;
    },
    
    addMessage(text, type = 'other', sender = null) {
        const chatMessages = document.getElementById('chatMessages');
        const messageDiv = document.createElement('div');
        
        if (type === 'system') {
            messageDiv.className = 'message system';
            messageDiv.innerHTML = `<span>${text}</span>`;
        } else {
            messageDiv.className = `message ${type}`;
            const displayName = sender || (type === 'own' ? this.currentUser.name : 'Ú©Ø§Ø±Ø¨Ø±');
            messageDiv.innerHTML = `<strong>${displayName}:</strong> ${text}`;
        }
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    },
    
    simulateVideo() {
        const videoGrid = document.getElementById('videoGrid');
        
        // ÙˆÛŒØ¯ÛŒÙˆÛŒ Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ
        const userVideo = document.createElement('div');
        userVideo.className = 'video-item';
        userVideo.innerHTML = `
            <div style="background: #333; width: 100%; height: 100%; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                <div style="text-align: center;">
                    <div style="font-size: 3rem;">ğŸ“¹</div>
                    <div>${this.currentUser.name}</div>
                </div>
            </div>
            <div class="user-name">${this.currentUser.name} (Ø´Ù…Ø§)</div>
        `;
        videoGrid.appendChild(userVideo);
        
        // ÙˆÛŒØ¯ÛŒÙˆÛŒ Ø§Ø³ØªØ§Ø¯ (Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø³Øª)
        if (this.currentUser.role === 'student') {
            const teacherVideo = document.createElement('div');
            teacherVideo.className = 'video-item';
            teacherVideo.innerHTML = `
                <div style="background: #2c3e50; width: 100%; height: 100%; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                    <div style="text-align: center;">
                        <div style="font-size: 3rem;">ğŸ‘¨â€ğŸ«</div>
                        <div>${this.currentClass.teacher}</div>
                    </div>
                </div>
                <div class="user-name">${this.currentClass.teacher} (Ø§Ø³ØªØ§Ø¯)</div>
            `;
            videoGrid.appendChild(teacherVideo);
        }
    },
    
    generateId() {
        return Math.random().toString(36).substr(2, 9);
    }
};

// ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ
function joinClass() {
    const className = document.getElementById('className').value;
    const userName = document.getElementById('userName').value;
    const userRole = document.getElementById('userRole').value;
    
    if (!className || !userName) {
        alert('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯');
        return;
    }
    
    classManager.joinClass(className, userName, userRole);
    
    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯ÛŒÚ¯Ø±
    setTimeout(() => {
        const fakeStudents = ['Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', 'Ø²Ù‡Ø±Ø§ Ú©Ø±ÛŒÙ…ÛŒ', 'Ù…Ù‡Ø¯ÛŒ Ø±Ø¶Ø§ÛŒÛŒ'];
        fakeStudents.forEach(name => {
            classManager.addParticipant({
                name: name,
                role: 'student',
                id: classManager.generateId()
            });
        });
        classManager.addMessage('Ú†Ù†Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ù¾ÛŒÙˆØ³ØªÙ†Ø¯', 'system');
    }, 2000);
}

function sendMessage() {
    const input = document.getElementById('messageInput');
    const message = input.value.trim();
    
    if (message) {
        classManager.addMessage(message, 'own');
        input.value = '';
        
        // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§Ø³Ø®
        setTimeout(() => {
            const responses = [
                'Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ù¾ÛŒØ§Ù… Ø´Ù…Ø§',
                'Ø³ÙˆØ§Ù„ Ø®ÙˆØ¨ÛŒ Ù¾Ø±Ø³ÛŒØ¯ÛŒØ¯',
                'Ù„Ø·ÙØ§Ù‹ Ø¨ÛŒØ´ØªØ± ØªÙˆØ¶ÛŒØ­ Ø¯Ù‡ÛŒØ¯'
            ];
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            const randomUser = classManager.participants.find(p => p.id !== classManager.currentUser.id);
            if (randomUser) {
                classManager.addMessage(randomResponse, 'other', randomUser.name);
            }
        }, 1000);
    }
}

function toggleMicrophone() {
    const btn = document.getElementById('micBtn');
    classManager.isMicOn = !classManager.isMicOn;
    btn.textContent = classManager.isMicOn ? 'ğŸ¤ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†' : 'ğŸ”‡ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†';
    btn.classList.toggle('active', !classManager.isMicOn);
    classManager.addMessage(`Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† ${classManager.isMicOn ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´'} Ø´Ø¯`, 'system');
}

function toggleCamera() {
    const btn = document.getElementById('cameraBtn');
    classManager.isCameraOn = !classManager.isCameraOn;
    btn.textContent = classManager.isCameraOn ? 'ğŸ“¹ Ø¯ÙˆØ±Ø¨ÛŒÙ†' : 'ğŸ“· Ø¯ÙˆØ±Ø¨ÛŒÙ†';
    btn.classList.toggle('active', !classManager.isCameraOn);
    classManager.addMessage(`Ø¯ÙˆØ±Ø¨ÛŒÙ† ${classManager.isCameraOn ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´'} Ø´Ø¯`, 'system');
}

function raiseHand() {
    classManager.addMessage(`${classManager.currentUser.name} Ø¯Ø³Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù„Ù†Ø¯ Ú©Ø±Ø¯`, 'system');
}

function shareScreen() {
    classManager.addMessage('Ø§Ù…Ú©Ø§Ù† Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡ ÙØ¹Ø§Ù„ Ø´Ø¯', 'system');
}

function generateInviteLink() {
    alert(`Ù„ÛŒÙ†Ú© Ø¯Ø¹ÙˆØª: ${classManager.currentClass.inviteLink}\n\nØ§ÛŒÙ† Ù„ÛŒÙ†Ú© Ú©Ù¾ÛŒ Ø´Ø¯!`);
    navigator.clipboard.writeText(classManager.currentClass.inviteLink);
}

function copyLink() {
    const link = document.getElementById('inviteLink').textContent;
    navigator.clipboard.writeText(link);
    alert('Ù„ÛŒÙ†Ú© Ú©Ù¾ÛŒ Ø´Ø¯!');
}

function clearChat() {
    document.getElementById('chatMessages').innerHTML = 
        '<div class="message system"><span>Ú†Øª Ù¾Ø§Ú© Ø´Ø¯</span></div>';
}

function leaveClass() {
    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ú©Ù„Ø§Ø³ Ø®Ø§Ø±Ø¬ Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯ØŸ')) {
        document.getElementById('classPage').classList.remove('active');
        document.getElementById('loginPage').classList.add('active');
        
        // Ø±ÛŒØ³Øª ÙØ±Ù…
        document.getElementById('className').value = '';
        document.getElementById('userName').value = '';
        document.getElementById('userRole').value = 'student';
        
        // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        classManager.currentClass = null;
        classManager.currentUser = null;
        classManager.participants = [];
        
        document.getElementById('videoGrid').innerHTML = '';
        document.getElementById('participantsList').innerHTML = '';
    }
}

// ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ø§ Enter
document.getElementById('messageInput')?.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
});
