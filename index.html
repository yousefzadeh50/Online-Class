<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English for Schools - Prospect 3</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .page {
            display: none;
            min-height: 100vh;
            padding: 20px;
        }

        .page.active {
            display: block;
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù†ØªØ±Ù„ */
        .control-btn {
            position: fixed;
            top: 20px;
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.95);
            cursor: pointer;
            font-size: 1.2em;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            transform: scale(1.1);
            background: white;
        }

        #musicToggle {
            left: 20px;
        }

        #helpBtn {
            right: 20px;
        }

        /* Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø·Ø±Ø§Ø­ */
        .designer-info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 18px;
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            animation: fadeInUp 1s ease;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .designer-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-left: 12px;
            border: 2px solid #667eea;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .designer-img:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .designer-name {
            font-size: 0.75em;
            color: #444;
            text-align: center;
            line-height: 1.4;
            font-weight: 500;
        }

        /* ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ */
        .main-header {
            text-align: center;
            margin-bottom: 50px;
            animation: fadeInDown 1s ease;
        }

        .main-title {
            font-size: 3.5em;
            color: white;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .sub-title {
            font-size: 2.2em;
            color: #f8f9fa;
            opacity: 0.9;
            font-weight: 500;
        }

        .lessons-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .lesson-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 35px 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            backdrop-filter: blur(5px);
        }

        .lesson-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border-color: #667eea;
            background: white;
        }

        .lesson-card h3 {
            font-size: 1.7em;
            color: #667eea;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .lesson-card p {
            color: #666;
            font-size: 1.2em;
            font-weight: 400;
        }

        /* ØµÙØ­Ù‡ Ø¯Ø±Ø³ */
        .lesson-header {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            margin-left: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        .back-btn:hover {
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
            transform: translateX(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .lesson-title {
            font-size: 2em;
            color: #333;
            font-weight: 600;
        }

        .lesson-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .section-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            font-weight: 500;
        }

        .section-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
        }

        .section-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            min-height: 500px;
            backdrop-filter: blur(5px);
        }

        .section-title {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 600;
        }

        .text-content {
            line-height: 1.8;
            font-size: 1.1em;
            margin-bottom: 25px;
        }

        .clickable-word {
            color: #667eea;
            cursor: pointer;
            border-bottom: 1px dashed #667eea;
            transition: all 0.2s ease;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .clickable-word:hover {
            background: rgba(102, 126, 234, 0.1);
            border-bottom-style: solid;
        }

        .audio-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 20px auto;
        }

        .audio-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        /* Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø´Ù†Ø§ÙˆØ± */
        .dictionary-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            width: 90%;
            max-width: 500px;
            animation: popIn 0.4s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .popup-content {
            padding: 25px;
            position: relative;
        }

        .close-popup {
            position: absolute;
            top: 15px;
            left: 20px;
            font-size: 1.8em;
            cursor: pointer;
            color: #666;
            transition: all 0.2s ease;
        }

        .close-popup:hover {
            color: #333;
            transform: scale(1.1);
        }

        .word-title {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .word-info p {
            margin: 12px 0;
            line-height: 1.6;
            font-size: 1.05em;
        }

        .word-info strong {
            color: #555;
        }

        .example-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .example-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 12px;
            font-weight: 500;
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.7);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ÛŒÛŒ */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5em;
            }
            
            .sub-title {
                font-size: 1.8em;
            }
            
            .lessons-container {
                grid-template-columns: 1fr;
            }
            
            .lesson-sections {
                grid-template-columns: 1fr;
            }
            
            .designer-info {
                position: relative;
                bottom: auto;
                left: auto;
                margin-top: 40px;
                justify-content: center;
                width: fit-content;
                margin-left: auto;
                margin-right: auto;
            }
            
            .lesson-title {
                font-size: 1.6em;
            }
            
            .section-content {
                padding: 25px;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 2em;
            }
            
            .sub-title {
                font-size: 1.5em;
            }
            
            .lesson-card {
                padding: 25px 20px;
            }
            
            .lesson-card h3 {
                font-size: 1.5em;
            }
            
            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <!-- Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø²Ù…ÛŒÙ†Ù‡ -->
    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Ø¯Ú©Ù…Ù‡ Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ -->
    <button id="musicToggle" class="control-btn">ğŸµ</button>
    
    <!-- Ø¯Ú©Ù…Ù‡ Ø±Ø§Ù‡Ù†Ù…Ø§ -->
    <button id="helpBtn" class="control-btn">?</button>
    
    <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø·Ø±Ø§Ø­ -->
    <div class="designer-info">
        <img src="https://s34.picofile.com/file/8488183492/2.png" alt="Designer" class="designer-img">
        <div class="designer-name">Designer<br>A.R. Yousefzadeh</div>
    </div>
    
    <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
    <div id="mainPage" class="page active">
        <header class="main-header">
            <h1 class="main-title">English for Schools</h1>
            <h2 class="sub-title">Prospect 3</h2>
        </header>
        
        <div class="lessons-container">
            <div class="lesson-card" data-lesson="1">
                <h3>Lesson 1</h3>
                <p>Personality</p>
            </div>
            <div class="lesson-card" data-lesson="2">
                <h3>Lesson 2</h3>
                <p>Travel</p>
            </div>
            <div class="lesson-card" data-lesson="3">
                <h3>Lesson 3</h3>
                <p>Festivals and Ceremonies</p>
            </div>
            <div class="lesson-card" data-lesson="4">
                <h3>Lesson 4</h3>
                <p>Services</p>
            </div>
            <div class="lesson-card" data-lesson="5">
                <h3>Lesson 5</h3>
                <p>Media</p>
            </div>
            <div class="lesson-card" data-lesson="6">
                <h3>Lesson 6</h3>
                <p>Health and Injuries</p>
            </div>
        </div>
    </div>
    
    <!-- ØµÙØ­Ù‡ Ø¯Ø±Ø³ -->
    <div id="lessonPage" class="page">
        <header class="lesson-header">
            <button id="backToMain" class="back-btn">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</button>
            <h1 id="lessonTitle" class="lesson-title">Lesson 1: Personality</h1>
        </header>
        
        <div class="lesson-sections">
            <button class="section-btn" data-section="conversation">Conversation</button>
            <button class="section-btn" data-section="practice">Practice 1&2</button>
            <button class="section-btn" data-section="language">Language Melody</button>
            <button class="section-btn" data-section="grammar">Grammar</button>
            <button class="section-btn" data-section="findit">Find It</button>
            <button class="section-btn" data-section="listening">Listening</button>
            <button class="section-btn" data-section="roleplay">Role Play</button>
            <button class="section-btn" data-section="photodict">Photo Dictionary</button>
            <button class="section-btn" data-section="workbook">Workbook</button>
            <button class="section-btn" data-section="quiz">Quiz</button>
        </div>
        
        <div id="sectionContent" class="section-content">
            <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ù‡Ø± Ø¨Ø®Ø´ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
        </div>
    </div>
    
    <!-- Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø´Ù†Ø§ÙˆØ± -->
    <div id="dictionaryPopup" class="dictionary-popup">
        <div class="popup-content">
            <span class="close-popup">&times;</span>
            <h3 id="wordTitle" class="word-title"></h3>
            <div class="word-info">
                <p><strong>ØªÙ„ÙØ¸:</strong> <span id="wordPronunciation"></span></p>
                <p><strong>Ù…Ø¹Ù†ÛŒ:</strong> <span id="wordMeaning"></span></p>
                <p><strong>Ù…ØªØ±Ø§Ø¯Ù:</strong> <span id="wordSynonyms"></span></p>
                <p><strong>Ú©Ù„Ù…Ø§Øª Ù…Ø±ØªØ¨Ø·:</strong> <span id="relatedWords"></span></p>
            </div>
            <div class="example-section">
                <h4 class="example-title">Ù…Ø«Ø§Ù„:</h4>
                <p id="wordExample"></p>
                <p id="exampleTranslation"></p>
                <button id="playExample" class="audio-btn">ğŸ”Š Ù¾Ø®Ø´ Ù…Ø«Ø§Ù„</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³â€ŒÙ‡Ø§
            const lessonsData = {
                1: {
                    title: "Lesson 1: Personality",
                    sections: {
                        conversation: {
                            title: "Conversation",
                            content: `Ehsan: Who is your best friend at school?
Parham: Reza.
Ehsan: What's he like?
Parham: Oh, he is really great! He's clever and kind.
Ehsan: Is he hard-working too?
Parham: Yes! And he's always very helpful.
Ehsan: How?
Parham: He always helps me with my lessons.`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        practice: {
                            title: "Practice 1&2",
                            content: `Practice 1 â†’ Talking about personality (1)
- Are you hard-working? Yes, I am.
- Is he clever? Yes, he is.
- Is Zahra talkative? No, she isn't.
- Are they neat? Yes, they are.
- Are they upset? No, they're not.

Practice 2 â†’ Talking about personality (2)
- What's your friend like? He's very funny.
- What's your mother like? She's very kind and patient.
- What's he like? He is quiet.
- What's she like? She is clever.
- What are you like? I'm a bit serious.
- What are they like? They are very kind.`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        language: {
                            title: "Language Melody",
                            content: `Listen to the conversation and pay attention to the intonations of 'affirmative' sentences.

Teacher: Farzaneh is a clever student. Everybody likes her.
Samira: Yes. I know. She is also very helpful.
Teacher: Well, you can ask her for help.
Samira: Ok, I'll ask her to help me with my English.

Listen to the sentences below and then practice.

1. He's very kind.
2. She's very patient.
3. You are very clever.
4. Everybody likes her.
5. I do my homework.
6. She works for a company.`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        grammar: {
                            title: "Grammar",
                            content: `Look at the tables below and listen to your teacher's explanations.

Affirmative
I am
He is
She is happy.
We are
You are
They are

Ali is clever.
It is red.
Zahra and Nadia are generous.

Question
Am I
Is he
Is she careful?
Are we
Are you
Are they

I am not talkative.
He is not shy.
They are not rude.`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        findit: {
                            title: "Find It",
                            content: `Find and underline "to be" verbs in the passage below.

I'm Mohsen. This is my classroom. There are 25 students in my class. I have a lot of friends. My best friend is Vahid. He's a good student. He is helpful and hard-working, but he is not very careful. He usually forgets important things. It's a big problem.`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        listening: {
                            title: "Listening",
                            content: `A) Listen to the conversation and fill out the table below.

Name: ________
Personality: ________

B) Listen to the audio and answer the questions below.

1. What's Iran like?
Iran is a ...... country.

2. What are Iranian people like?
Iranian people are......, ......, ...... and .......`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        roleplay: {
                            title: "Role Play",
                            content: `Talk with your classmates about the personality of your friends/ classmates/ teachers/ relatives.

Example dialogue:
Student A: What's your math teacher like?
Student B: He's very patient and kind. He always helps us with difficult problems.
Student A: That's great! My English teacher is very funny and creative.`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        photodict: {
                            title: "Photo Dictionary",
                            content: `Personality Words:
- Angry: Ø¹ØµØ¨Ø§Ù†ÛŒ
- Brave: Ø´Ø¬Ø§Ø¹
- Careless: Ø¨ÛŒâ€ŒØ¯Ù‚Øª
- Clever: Ø¨Ø§Ù‡ÙˆØ´
- Funny: Ø¨Ø§Ù…Ø²Ù‡
- Kind: Ù…Ù‡Ø±Ø¨Ø§Ù†
- Hard-working: Ø³Ø®Øªâ€ŒÚ©ÙˆØ´
- Helpful: Ú©Ù…Ú©â€ŒÚ©Ù†Ù†Ø¯Ù‡`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        },
                        workbook: {
                            title: "Workbook",
                            content: `Workbook exercises for Lesson 1 will be displayed here.

Students can complete interactive exercises and check their answers.`,
                            audio: null
                        },
                        quiz: {
                            title: "Quiz",
                            content: `Take a 20-point quiz to test your understanding of Lesson 1.

The quiz includes multiple choice questions, fill-in-the-blanks, and matching exercises.`,
                            audio: null
                        }
                    }
                },
                2: {
                    title: "Lesson 2: Travel",
                    sections: {
                        conversation: {
                            title: "Conversation",
                            content: `Receptionist: Welcome to our hotel sir, how can I help you?
Tourist: My name is Paul Kress. I'm from Germany. I have a reservation here.
Receptionist: I see! Are you staying here for two nights?
Tourist: Yes, my wife and I are visiting Tehran for three days.
Receptionist: Where is she now? I need to check her passport.
Tourist: She's standing over there, by the gift shop. Here is her passport.
Receptionist: Thank you. This is your key. It's room 213. Hope you enjoy your stay in Tehran.`,
                            audio: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                        }
                        // Ø³Ø§ÛŒØ± Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ 2
                    }
                }
                // Ø³Ø§ÛŒØ± Ø¯Ø±ÙˆØ³
            };

            // Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ú©Ù„Ù…Ø§Øª
            const wordDictionary = {
                "friend": {
                    pronunciation: "/frend/",
                    meaning: "Ø¯ÙˆØ³Øª",
                    synonyms: "companion, pal",
                    relatedWords: "friendship, friendly",
                    example: "My best friend is very kind.",
                    exampleTranslation: "Ø¨Ù‡ØªØ±ÛŒÙ† Ø¯ÙˆØ³Øª Ù…Ù† Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ø±Ø¨Ø§Ù† Ø§Ø³Øª."
                },
                "clever": {
                    pronunciation: "/Ëˆklev.É™r/",
                    meaning: "Ø¨Ø§Ù‡ÙˆØ´ØŒ Ø²Ø±Ù†Ú¯",
                    synonyms: "smart, intelligent",
                    relatedWords: "cleverness, cleverly",
                    example: "She is a clever student.",
                    exampleTranslation: "Ø§Ùˆ ÛŒÚ© Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§Ù‡ÙˆØ´ Ø§Ø³Øª."
                },
                "kind": {
                    pronunciation: "/kaÉªnd/",
                    meaning: "Ù…Ù‡Ø±Ø¨Ø§Ù†",
                    synonyms: "nice, gentle",
                    relatedWords: "kindness, kindly",
                    example: "He is a kind person.",
                    exampleTranslation: "Ø§Ùˆ ÛŒÚ© ÙØ±Ø¯ Ù…Ù‡Ø±Ø¨Ø§Ù† Ø§Ø³Øª."
                },
                "hard-working": {
                    pronunciation: "/ËŒhÉ‘Ërd ËˆwÉœËr.kÉªÅ‹/",
                    meaning: "Ø³Ø®Øªâ€ŒÚ©ÙˆØ´",
                    synonyms: "diligent, industrious",
                    relatedWords: "hard work, worker",
                    example: "She is a hard-working student.",
                    exampleTranslation: "Ø§Ùˆ ÛŒÚ© Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø³Ø®Øªâ€ŒÚ©ÙˆØ´ Ø§Ø³Øª."
                },
                "helpful": {
                    pronunciation: "/Ëˆhelp.fÉ™l/",
                    meaning: "Ú©Ù…Ú©â€ŒÚ©Ù†Ù†Ø¯Ù‡",
                    synonyms: "useful, supportive",
                    relatedWords: "help, helpless",
                    example: "The teacher is very helpful.",
                    exampleTranslation: "Ù…Ø¹Ù„Ù… Ø¨Ø³ÛŒØ§Ø± Ú©Ù…Ú©â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø³Øª."
                },
                "reservation": {
                    pronunciation: "/ËŒrez.É™rËˆveÉª.ÊƒÉ™n/",
                    meaning: "Ø±Ø²Ø±ÙˆØ§Ø³ÛŒÙˆÙ†",
                    synonyms: "booking, appointment",
                    relatedWords: "reserve, reserved",
                    example: "I have a hotel reservation.",
                    exampleTranslation: "Ù…Ù† ÛŒÚ© Ø±Ø²Ø±Ùˆ Ù‡ØªÙ„ Ø¯Ø§Ø±Ù…."
                },
                "passport": {
                    pronunciation: "/ËˆpÃ¦s.pÉ”Ërt/",
                    meaning: "Ú¯Ø°Ø±Ù†Ø§Ù…Ù‡",
                    synonyms: "ID, document",
                    relatedWords: "pass, port",
                    example: "I need my passport to travel.",
                    exampleTranslation: "Ø¨Ø±Ø§ÛŒ Ø³ÙØ± Ø¨Ù‡ Ú¯Ø°Ø±Ù†Ø§Ù…Ù‡ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ù…."
                }
            };

            // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ
            let currentLesson = null;
            let currentSection = null;
            const bgMusic = document.getElementById('bgMusic');
            const musicToggle = document.getElementById('musicToggle');
            let isMusicPlaying = false;

            // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
            initializeApp();

            function initializeApp() {
                setupEventListeners();
                // ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…ÙˆØ³ÛŒÙ‚ÛŒ (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¯Ø± Ø¨Ø±Ø®ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ Ú©Ø§Ø± Ù†Ú©Ù†Ø¯)
                setTimeout(() => {
                    if (!isMusicPlaying) {
                        toggleMusic();
                    }
                }, 1000);
            }

            function setupEventListeners() {
                // Ø¯Ú©Ù…Ù‡ Ù…ÙˆØ³ÛŒÙ‚ÛŒ
                musicToggle.addEventListener('click', toggleMusic);
                
                // Ø¯Ú©Ù…Ù‡ Ø±Ø§Ù‡Ù†Ù…Ø§
                document.getElementById('helpBtn').addEventListener('click', showHelp);
                
                // Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª
                document.getElementById('backToMain').addEventListener('click', loadMainPage);
                
                // Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³
                document.querySelectorAll('.lesson-card').forEach(card => {
                    card.addEventListener('click', function() {
                        const lessonNum = this.getAttribute('data-lesson');
                        loadLessonPage(lessonNum);
                    });
                });
                
                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³
                document.querySelectorAll('.section-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const section = this.getAttribute('data-section');
                        loadSectionContent(section);
                    });
                });
                
                // Ø¨Ø³ØªÙ† Ù¾Ø§Ù¾â€ŒØ¢Ù¾ Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ
                document.querySelector('.close-popup').addEventListener('click', closeDictionary);
                
                // Ù¾Ø®Ø´ Ù…Ø«Ø§Ù„ Ø¯Ø± Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ
                document.getElementById('playExample').addEventListener('click', playExampleAudio);
                
                // Ø¨Ø³ØªÙ† Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø®Ø§Ø±Ø¬ Ø§Ø² Ø¢Ù†
                document.addEventListener('click', function(event) {
                    const popup = document.getElementById('dictionaryPopup');
                    if (event.target === popup) {
                        closeDictionary();
                    }
                });
            }

            function toggleMusic() {
                if (isMusicPlaying) {
                    bgMusic.pause();
                    musicToggle.textContent = 'ğŸ”‡';
                } else {
                    bgMusic.play().catch(e => {
                        console.log('Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ù…Ø¬Ø§Ø² Ù†ÛŒØ³Øª');
                        alert('Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒØŒ Ù„Ø·ÙØ§ ÛŒÚ© Ø¨Ø§Ø± Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯');
                    });
                    musicToggle.textContent = 'ğŸµ';
                }
                isMusicPlaying = !isMusicPlaying;
            }

            function showHelp() {
                alert('Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©ØªØ§Ø¨:\n\n- Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´/ØªÙˆÙ‚Ù Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø²Ù…ÛŒÙ†Ù‡ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ğŸµ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯\n- Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø±Ø³ Ø±ÙˆÛŒ Ú©Ø§Ø±Øª Ø¯Ø±Ø³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯\n- Ø¯Ø± Ù‡Ø± Ø¯Ø±Ø³ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯\n- Ø±ÙˆÛŒ Ú©Ù„Ù…Ø§Øª Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ØªØ§ Ù…Ø¹Ù†ÛŒ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ù†Ù‡Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯\n- Ø§Ø² Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ğŸ”Š Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯');
            }

            function loadMainPage() {
                document.getElementById('mainPage').classList.add('active');
                document.getElementById('lessonPage').classList.remove('active');
                currentLesson = null;
            }

            function loadLessonPage(lessonNum) {
                currentLesson = lessonNum;
                const lessonData = lessonsData[lessonNum];
                
                if (!lessonData) {
                    alert('Ø§ÛŒÙ† Ø¯Ø±Ø³ Ù‡Ù†ÙˆØ² Ø¢Ù…Ø§Ø¯Ù‡ Ù†ÛŒØ³Øª!');
                    return;
                }
                
                document.getElementById('lessonTitle').textContent = lessonData.title;
                document.getElementById('mainPage').classList.remove('active');
                document.getElementById('lessonPage').classList.add('active');
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
                loadSectionContent('conversation');
            }

            function loadSectionContent(section) {
                if (!currentLesson) return;
                
                currentSection = section;
                const sectionData = lessonsData[currentLesson].sections[section];
                
                if (!sectionData) {
                    document.getElementById('sectionContent').innerHTML = `
                        <h2 class="section-title">${section}</h2>
                        <div class="text-content">Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.</div>
                    `;
                    return;
                }
                
                const contentDiv = document.getElementById('sectionContent');
                
                contentDiv.innerHTML = `
                    <h2 class="section-title">${sectionData.title}</h2>
                    <div class="text-content" id="interactiveText">${formatTextWithClickableWords(sectionData.content)}</div>
                    ${sectionData.audio ? `
                        <button class="audio-btn" onclick="playSectionAudio('${sectionData.audio}')">
                            ğŸ”Š Ù¾Ø®Ø´ ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Ø§ÛŒÙ† Ø¨Ø®Ø´
                        </button>
                    ` : ''}
                `;
                
                // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù‚Ø§Ø¨Ù„ÛŒØª Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ù„Ù…Ø§Øª
                setupWordClickListeners();
            }

            function formatTextWithClickableWords(text) {
                // Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ù…ØªÙ† Ø±Ø§ Ø¨Ù‡ Ú©Ù„Ù…Ø§Øª Ù‚Ø§Ø¨Ù„ Ú©Ù„ÛŒÚ© ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
                return text.split(/(\s+)/).map(word => {
                    const cleanWord = word.trim().replace(/[.,?!;:'"]/g, '');
                    if (cleanWord.length > 0 && /[a-zA-Z]/.test(cleanWord) && wordDictionary[cleanWord.toLowerCase()]) {
                        return `<span class="clickable-word" data-word="${cleanWord}">${word}</span>`;
                    }
                    return word;
                }).join('');
            }

            function setupWordClickListeners() {
                document.querySelectorAll('.clickable-word').forEach(word => {
                    word.addEventListener('click', function() {
                        const wordText = this.getAttribute('data-word');
                        showWordInfo(wordText);
                        // Ù¾Ø®Ø´ ØµØ¯Ø§ÛŒ Ú©Ù„ÛŒÚ©
                        playClickSound();
                    });
                });
            }

            function playClickSound() {
                // Ø§ÛŒØ¬Ø§Ø¯ ØµØ¯Ø§ÛŒ Ú©Ù„ÛŒÚ© Ø³Ø§Ø¯Ù‡
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
            }

            function showWordInfo(word) {
                const wordData = getWordData(word);
                
                document.getElementById('wordTitle').textContent = word;
                document.getElementById('wordPronunciation').textContent = wordData.pronunciation;
                document.getElementById('wordMeaning').textContent = wordData.meaning;
                document.getElementById('wordSynonyms').textContent = wordData.synonyms;
                document.getElementById('relatedWords').textContent = wordData.relatedWords;
                document.getElementById('wordExample').textContent = wordData.example;
                document.getElementById('exampleTranslation').textContent = wordData.exampleTranslation;
                
                document.getElementById('dictionaryPopup').style.display = 'block';
            }

            function getWordData(word) {
                return wordDictionary[word.toLowerCase()] || {
                    pronunciation: "---",
                    meaning: "Ù…Ø¹Ù†ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯",
                    synonyms: "---",
                    relatedWords: "---",
                    example: "Ù…Ø«Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª",
                    exampleTranslation: "---"
                };
            }

            function closeDictionary() {
                document.getElementById('dictionaryPopup').style.display = 'none';
            }

            function playExampleAudio() {
                const exampleText = document.getElementById('wordExample').textContent;
                playTextAsAudio(exampleText);
            }

            function playSectionAudio(audioFile) {
                // Ù¾Ø®Ø´ ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Ø¨Ø®Ø´
                const audio = new Audio(audioFile);
                audio.play().catch(e => {
                    console.log('Ù¾Ø®Ø´ ØµØ¯Ø§ Ø¨Ø§ Ù…Ø´Ú©Ù„ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯');
                    alert('ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§ Ø¨Ø¹Ø¯Ø§ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
                });
            }

            function playTextAsAudio(text) {
                // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Web Speech API Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ù…ØªÙ† Ø¨Ù‡ Ú¯ÙØªØ§Ø±
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.pitch = 1;
                    window.speechSynthesis.speak(utterance);
                } else {
                    alert('Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ¨Ø¯ÛŒÙ„ Ù…ØªÙ† Ø¨Ù‡ Ú¯ÙØªØ§Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯');
                }
            }

            // ØµØ§Ø¯Ø± Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± HTML
            window.playSectionAudio = playSectionAudio;
            window.playTextAsAudio = playTextAsAudio;
        });
    </script>
</body>
</html>
