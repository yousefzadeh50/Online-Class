<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ฺฉูุงุณ ุขููุงู ุชุนุงูู</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ฺฉูุงุณ ุขููุงู ุชุนุงูู</h1>
            <div class="user-info">
                <span id="username">ฺฉุงุฑุจุฑ ูููุงู</span>
                <button id="muteBtn" class="btn">๐ ูฺฉุฑูููู</button>
                <button id="videoBtn" class="btn">๐น ุฏูุฑุจู</button>
            </div>
        </header>

        <div class="main-content">
            <div class="video-section">
                <div class="video-container">
                    <video id="localVideo" autoplay muted></video>
                    <div class="video-label">ุดูุง</div>
                </div>
                <div class="video-container">
                    <video id="remoteVideo" autoplay></video>
                    <div class="video-label">ุงุณุชุงุฏ</div>
                </div>
            </div>

            <div class="controls">
                <button id="shareScreenBtn" class="btn">๐บ ุงุดุชุฑุงฺฉ ุตูุญู</button>
                <button id="chatToggle" class="btn">๐ฌ ฺุช</button>
                <button id="whiteboardBtn" class="btn">๐ ุชุฎุชู ุณูุฏ</button>
                <button id="raiseHandBtn" class="btn">โ ุฏุณุช ุจููุฏ ฺฉุฑุฏู</button>
            </div>

            <div class="chat-section" id="chatSection">
                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        <span>ุจู ฺฉูุงุณ ุขููุงู ุฎูุด ุขูุฏุฏ!</span>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="messageInput" placeholder="ูพุงู ุฎูุฏ ุฑุง ุจููุณุฏ...">
                    <button id="sendBtn" class="btn">ุงุฑุณุงู</button>
                </div>
            </div>
        </div>

        <div class="whiteboard" id="whiteboard">
            <canvas id="drawingCanvas"></canvas>
            <div class="whiteboard-controls">
                <input type="color" id="colorPicker" value="#000000">
                <input type="range" id="brushSize" min="1" max="10" value="3">
                <button id="clearBoard" class="btn">ูพุงฺฉ ฺฉุฑุฏู</button>
                <button id="closeWhiteboard" class="btn">ุจุณุชู</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #333;
    height: 100vh;
}

.container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    background: white;
    margin: 0 auto;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
}

.header {
    background: #2c3e50;
    color: white;
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.header h1 {
    font-size: 1.5rem;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 1rem;
    gap: 1rem;
}

.video-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    flex: 1;
    min-height: 400px;
}

.video-container {
    position: relative;
    background: #000;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.video-label {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 0.9rem;
}

.controls {
    display: flex;
    justify-content: center;
    gap: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.btn {
    padding: 10px 20px;
    border: none;
    border-radius: 25px;
    background: #3498db;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
}

.btn:hover {
    background: #2980b9;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.btn:active {
    transform: translateY(0);
}

.chat-section {
    background: white;
    border: 1px solid #ddd;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    height: 300px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.chat-messages {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
    border-bottom: 1px solid #eee;
}

.message {
    margin-bottom: 0.5rem;
    padding: 0.5rem 1rem;
    border-radius: 15px;
    max-width: 80%;
}

.message.system {
    background: #e3f2fd;
    margin: 0 auto;
    text-align: center;
}

.message.own {
    background: #dcf8c6;
    margin-right: auto;
    margin-left: 0;
}

.message.other {
    background: #fff;
    border: 1px solid #ddd;
    margin-left: auto;
    margin-right: 0;
}

.chat-input {
    display: flex;
    padding: 1rem;
    gap: 0.5rem;
}

.chat-input input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 20px;
    outline: none;
}

.chat-input input:focus {
    border-color: #3498db;
}

.whiteboard {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    border: 2px solid #333;
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    display: none;
}

#drawingCanvas {
    border: 1px solid #ddd;
    border-radius: 5px;
    cursor: crosshair;
}

.whiteboard-controls {
    display: flex;
    gap: 1rem;
    align-items: center;
    margin-top: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 5px;
}

@media (max-width: 768px) {
    .video-section {
        grid-template-columns: 1fr;
    }
    
    .controls {
        flex-wrap: wrap;
    }
    
    .header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
}
class OnlineClass {
    constructor() {
        this.localStream = null;
        this.isAudioMuted = false;
        this.isVideoOff = false;
        this.isHandRaised = false;
        this.isWhiteboardOpen = false;
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.initiateVideoCall();
        this.setupWhiteboard();
    }

    setupEventListeners() {
        // ฺฉูุชุฑูโูุง ุตุฏุง ู ุชุตูุฑ
        document.getElementById('muteBtn').addEventListener('click', () => this.toggleAudio());
        document.getElementById('videoBtn').addEventListener('click', () => this.toggleVideo());
        document.getElementById('shareScreenBtn').addEventListener('click', () => this.shareScreen());
        document.getElementById('raiseHandBtn').addEventListener('click', () => this.raiseHand());
        
        // ฺฉูุชุฑูโูุง ฺุช
        document.getElementById('chatToggle').addEventListener('click', () => this.toggleChat());
        document.getElementById('sendBtn').addEventListener('click', () => this.sendMessage());
        document.getElementById('messageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') this.sendMessage();
        });

        // ฺฉูุชุฑูโูุง ุชุฎุชู ุณูุฏ
        document.getElementById('whiteboardBtn').addEventListener('click', () => this.toggleWhiteboard());
        document.getElementById('closeWhiteboard').addEventListener('click', () => this.toggleWhiteboard());
        document.getElementById('clearBoard').addEventListener('click', () => this.clearWhiteboard());
    }

    async initiateVideoCall() {
        try {
            this.localStream = await navigator.mediaDevices.getUserMedia({
                video: true,
                audio: true
            });
            
            const localVideo = document.getElementById('localVideo');
            localVideo.srcObject = this.localStream;
            
            // ุดุจูโุณุงุฒ ูุฏู ุงุณุชุงุฏ (ุฏุฑ ุญุงูุช ูุงูุน ุงุฒ WebRTC ุงุณุชูุงุฏู ูโุดูุฏ)
            this.simulateTeacherVideo();
            
        } catch (error) {
            console.error('ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ุฏูุฑุจู ู ูฺฉุฑูููู:', error);
            this.showMessage('ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ุฏูุฑุจู ู ูฺฉุฑูููู', 'system');
        }
    }

    simulateTeacherVideo() {
        // ุฏุฑ ฺฉ ูุญุท ูุงูุนุ ุงู ุจุฎุด ุจุง WebRTC ูพุงุฏูโุณุงุฒ ูโุดูุฏ
        const remoteVideo = document.getElementById('remoteVideo');
        // ุดุจูโุณุงุฒ ูุฏู ุงุณุชุงุฏ
        setTimeout(() => {
            this.showMessage('ุงุณุชุงุฏ ุจู ฺฉูุงุณ ูพูุณุช', 'system');
        }, 2000);
    }

    toggleAudio() {
        const audioTracks = this.localStream.getAudioTracks();
        audioTracks.forEach(track => {
            track.enabled = !track.enabled;
        });
        
        this.isAudioMuted = !this.isAudioMuted;
        document.getElementById('muteBtn').textContent = 
            this.isAudioMuted ? '๐ ูฺฉุฑูููู' : '๐ ูฺฉุฑูููู';
        
        this.showMessage(`ูฺฉุฑูููู ${this.isAudioMuted ? 'ุฎุงููุด' : 'ุฑูุดู'} ุดุฏ`, 'system');
    }

    toggleVideo() {
        const videoTracks = this.localStream.getVideoTracks();
        videoTracks.forEach(track => {
            track.enabled = !track.enabled;
        });
        
        this.isVideoOff = !this.isVideoOff;
        document.getElementById('videoBtn').textContent = 
            this.isVideoOff ? '๐ท ุฏูุฑุจู' : '๐น ุฏูุฑุจู';
        
        this.showMessage(`ุฏูุฑุจู ${this.isVideoOff ? 'ุฎุงููุด' : 'ุฑูุดู'} ุดุฏ`, 'system');
    }

    async shareScreen() {
        try {
            const screenStream = await navigator.mediaDevices.getDisplayMedia({
                video: true
            });
            
            const localVideo = document.getElementById('localVideo');
            localVideo.srcObject = screenStream;
            
            this.showMessage('ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุตูุญู ุดุฑูุน ุดุฏ', 'system');
            
            screenStream.getTracks().forEach(track => {
                track.addEventListener('ended', () => {
                    localVideo.srcObject = this.localStream;
                    this.showMessage('ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุตูุญู ูพุงุงู ุงูุช', 'system');
                });
            });
            
        } catch (error) {
            console.error('ุฎุทุง ุฏุฑ ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุตูุญู:', error);
        }
    }

    raiseHand() {
        this.isHandRaised = !this.isHandRaised;
        const button = document.getElementById('raiseHandBtn');
        
        if (this.isHandRaised) {
            button.style.background = '#e74c3c';
            button.textContent = 'โ ุฏุณุช ูพุงู';
            this.showMessage('ุฏุณุช ุดูุง ุจููุฏ ุดุฏ', 'system');
        } else {
            button.style.background = '#3498db';
            button.textContent = 'โ ุฏุณุช ุจููุฏ ฺฉุฑุฏู';
            this.showMessage('ุฏุณุช ุดูุง ูพุงู ุขูุฏ', 'system');
        }
    }

    toggleChat() {
        const chatSection = document.getElementById('chatSection');
        chatSection.style.display = chatSection.style.display === 'none' ? 'flex' : 'none';
    }

    sendMessage() {
        const messageInput = document.getElementById('messageInput');
        const message = messageInput.value.trim();
        
        if (message) {
            this.showMessage(message, 'own');
            messageInput.value = '';
            
            // ุดุจูโุณุงุฒ ูพุงุณุฎ ุงุณุชุงุฏ
            setTimeout(() => {
                const responses = [
                    'ุณูุงู ุฎูุจ ูพุฑุณุฏุฏ!',
                    'ูุทูุงู ฺฉู ุจุดุชุฑ ุชูุถุญ ุฏูุฏ',
                    'ุงู ูุจุญุซ ุฑุง ุฏุฑ ุฌูุณู ุจุนุฏ ุจุฑุฑุณ ูโฺฉูู',
                    'ุขุง ูพุงุณุฎ ูู ฺฉุงู ุจูุฏุ'
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                this.showMessage(randomResponse, 'other');
            }, 2000);
        }
    }

    showMessage(message, type) {
        const chatMessages = document.getElementById('chatMessages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${type}`;
        messageDiv.textContent = message;
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    setupWhiteboard() {
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        
        // ุชูุธู ุงูุฏุงุฒู ฺฉุงููุงุณ
        canvas.width = 800;
        canvas.height = 500;
        
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        
        // ุฑูุฏุงุฏูุง ุฑุณู
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        
        function startDrawing(e) {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.strokeStyle = document.getElementById('colorPicker').value;
            ctx.lineWidth = document.getElementById('brushSize').value;
            ctx.lineCap = 'round';
            ctx.stroke();
            
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
    }

    toggleWhiteboard() {
        const whiteboard = document.getElementById('whiteboard');
        this.isWhiteboardOpen = !this.isWhiteboardOpen;
        
        if (this.isWhiteboardOpen) {
            whiteboard.style.display = 'block';
            this.showMessage('ุชุฎุชู ุณูุฏ ุจุงุฒ ุดุฏ', 'system');
        } else {
            whiteboard.style.display = 'none';
            this.showMessage('ุชุฎุชู ุณูุฏ ุจุณุชู ุดุฏ', 'system');
        }
    }

    clearWhiteboard() {
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
}

// ุฑุงูโุงูุฏุงุฒ ฺฉูุงุณ ุขููุงู ููฺฏุงู ฺฉู ุตูุญู ุจุงุฑฺฏุฐุงุฑ ุดุฏ
document.addEventListener('DOMContentLoaded', () => {
    new OnlineClass();
});
