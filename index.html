<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ† ØªØ¹Ø§Ù…Ù„ÛŒ</title>
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØµØ­ÛŒØ­ Ùˆ Ú©Ø§Ù…Ù„ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            height: 100vh;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: white;
            margin: 0 auto;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        .header {
            background: #2c3e50;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .main-content {
            flex: 1;
            display: flex;
            padding: 1rem;
            gap: 1rem;
        }

        .video-grid {
            flex: 3;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .video-item {
            background: #000;
            border-radius: 10px;
            position: relative;
        }

        video {
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }

        .student-name {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
        }

        .sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-container {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .chat-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #ddd;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            padding: 1rem;
            background: #f8f9fa;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: #3498db;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ† - Ø±ÛŒØ§Ø¶ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…</h1>
            <div class="user-info">
                <span>Ø§Ø³ØªØ§Ø¯: Ø§Ø­Ù…Ø¯ÛŒ</span>
                <span>ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†: <span id="studentCount">0</span></span>
            </div>
        </header>

        <div class="main-content">
            <div class="video-grid" id="videoGrid">
                <!-- ÙˆÛŒØ¯ÛŒÙˆÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
            
            <div class="sidebar">
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message system">Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...">
                        <button class="btn" onclick="sendMessage()">Ø§Ø±Ø³Ø§Ù„</button>
                    </div>
                </div>
                
                <div class="participants-list">
                    <h3>Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ú¯Ø§Ù†</h3>
                    <div id="participantsList"></div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" onclick="toggleMic()">ğŸ”Š Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†</button>
            <button class="btn" onclick="toggleCamera()">ğŸ“¹ Ø¯ÙˆØ±Ø¨ÛŒÙ†</button>
            <button class="btn" onclick="raiseHand()">âœ‹ Ø¯Ø³Øª Ø¨Ù„Ù†Ø¯ Ú©Ù†</button>
            <button class="btn" onclick="shareScreen()">ğŸ“º Ø§Ø´ØªØ±Ø§Ú© ØµÙØ­Ù‡</button>
            <button class="btn" onclick="openWhiteboard()">ğŸ“ ØªØ®ØªÙ‡ Ø³ÙÛŒØ¯</button>
        </div>
    </div>

    <script>
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§ÛŒÙ‡â€ŒØ§ÛŒ Ø§Ø² WebRTC
        class OnlineClass {
            constructor() {
                this.localStream = null;
                this.connections = [];
                this.peers = {};
            }

            async initialize() {
                try {
                    // Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†
                    this.localStream = await navigator.mediaDevices.getUserMedia({
                        video: true,
                        audio: true
                    });
                    
                    this.setupEventListeners();
                    this.displayLocalVideo();
                    
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù…Ø¬ÙˆØ²Ù‡Ø§:', error);
                }
            }

            displayLocalVideo() {
                const videoGrid = document.getElementById('videoGrid');
                const videoElement = document.createElement('video');
                videoElement.srcObject = this.localStream;
                videoElement.autoplay = true;
                videoElement.muted = true;
                
                const videoContainer = document.createElement('div');
                videoContainer.className = 'video-item';
                videoContainer.appendChild(videoElement);
                
                const nameLabel = document.createElement('div');
                nameLabel.className = 'student-name';
                nameLabel.textContent = 'Ø´Ù…Ø§';
                videoContainer.appendChild(nameLabel);
                
                videoGrid.appendChild(videoContainer);
            }

            setupEventListeners() {
                // Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…
                document.getElementById('messageInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });
            }

            sendMessage() {
                const input = document.getElementById('messageInput');
                const message = input.value.trim();
                
                if (message) {
                    this.displayMessage(message, 'own');
                    input.value = '';
                    
                    // Ø¯Ø± Ù…Ø­ÛŒØ· ÙˆØ§Ù‚Ø¹ÛŒØŒ Ù¾ÛŒØ§Ù… Ø§Ø² Ø·Ø±ÛŒÙ‚ WebSocket Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                }
            }

            displayMessage(message, type) {
                const chatMessages = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}`;
                messageDiv.textContent = message;
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú©Ù„Ø§Ø³
        const onlineClass = new OnlineClass();
        onlineClass.initialize();

        // ØªÙˆØ§Ø¨Ø¹ Ú©Ù†ØªØ±Ù„
        function toggleMic() {
            // Ú©Ù†ØªØ±Ù„ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†
        }

        function toggleCamera() {
            // Ú©Ù†ØªØ±Ù„ Ø¯ÙˆØ±Ø¨ÛŒÙ†
        }

        function raiseHand() {
            onlineClass.displayMessage('âœ‹ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø³Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù„Ù†Ø¯ Ú©Ø±Ø¯', 'system');
        }

        function shareScreen() {
            // Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
        }

        function openWhiteboard() {
            // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØªØ®ØªÙ‡ Ø³ÙÛŒØ¯
        }
    </script>
</body>
</html>
